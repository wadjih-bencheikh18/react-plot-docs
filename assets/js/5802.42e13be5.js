"use strict";(self.webpackChunkdocs_react_plot=self.webpackChunkdocs_react_plot||[]).push([[5802],{7217:(e,t,n)=>{function s(e,t={}){if("string"==typeof e)return e;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer){const{encoding:n=l(e)}=t;return new TextDecoder(n).decode(e)}throw new TypeError("blob must be a string, ArrayBuffer or ArrayBufferView")}function l(e){const t=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);if(t.length>=2){if(254===t[0]&&255===t[1])return"utf-16be";if(255===t[0]&&254===t[1])return"utf-16le"}return function(e){if(!e)return!1;for(var t=0,n=e.length;t<n;)if(e[t]<=127)t++;else{if(e[t]>=194&&e[t]<=223){if(e[t+1]>>6==2){t+=2;continue}return!1}if((224===e[t]&&e[t+1]>=160&&e[t+1]<=191||237===e[t]&&e[t+1]>=128&&e[t+1]<=159)&&e[t+2]>>6==2)t+=3;else if((e[t]>=225&&e[t]<=236||e[t]>=238&&e[t]<=239)&&e[t+1]>>6==2&&e[t+2]>>6==2)t+=3;else{if(!(240===e[t]&&e[t+1]>=144&&e[t+1]<=191||e[t]>=241&&e[t]<=243&&e[t+1]>>6==2||244===e[t]&&e[t+1]>=128&&e[t+1]<=143)||e[t+2]>>6!=2||e[t+3]>>6!=2)return!1;t+=4}}return!0}(e)?"utf-8":"latin1"}n.d(t,{Z:()=>s})},5802:(e,t,n)=>{function s(e){if(4===e.length||5===e.length){let t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1}let t=Number(e);return 0!==t||e.includes("0")?Number.isNaN(t)?e:t:e}n.d(t,{O:()=>Y});var l=n(7217);const r=["TIC",".RIC","SCANNUMBER"];function a(e){let t=e.spectra,n=t.length,s={times:new Array(n),series:{ms:{dimension:2,data:new Array(n)}}},l=[];for(let a=0;a<r.length;a++){let e=u(r[a]);t[0][e]&&(l.push(e),s.series[e]={dimension:1,data:new Array(n)})}for(let r=0;r<n;r++){let e=t[r];s.times[r]=e.pageValue;for(let t=0;t<l.length;t++)s.series[l[t]].data[r]=Number(e[l[t]]);e.data&&(s.series.ms.data[r]=[e.data.x,e.data.y])}e.chromatogram=s}function i(e){return-1!==r.indexOf(e)}function u(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"")}function o(e){let t=[];for(let n=0;n<e.length;n++)t.push(Number(e[n]));return t}function p(e,t){let n=e.yFactor,s=e.deltaX;e.isXYdata=!0;let l={x:[],y:[]};e.data=l;let r,a=e.firstX,i=e.firstY,u=!1,o=0;for(;o<t.length;o++)if(r=t.charCodeAt(o),13===r||10===r)u=!0;else if(u)break;let p=!0,f=!1,c=!1,h=0,m=!1,d=!1,g=0,b=0,y=!1,A=!1,x=!1,N=0;for(;o<=t.length;o++)if(r=o===t.length?13:t.charCodeAt(o),d)13!==r&&10!==r||(p=!0,d=!1);else if(r<=57&&r>=48)A=!0,N>0?g+=(r-48)/Math.pow(10,N++):(g*=10,g+=r-48);else if(44===r||46===r)A=!0,N++;else{if(A){if(p)p=!1,c&&(x=!0);else if(x)x=!1;else{f?(h=y?0-g:g,c=!0,f=!1):m||(b=y?0-g:g);let e=m?g-1:1;for(let t=0;t<e;t++)c?i+=h:i=b,l.x.push(a),l.y.push(i*n),a+=s}y=!1,g=0,N=0,A=!1,m=!1}if(r<74&&r>63)A=!0,c=!1,g=r-64;else if(r>96&&r<106)A=!0,c=!1,g=r-96,y=!0;else if(115===r)A=!0,m=!0,g=9;else if(r>82&&r<91)A=!0,m=!0,g=r-82;else if(r>73&&r<83)A=!0,f=!0,g=r-73;else if(r>105&&r<115)A=!0,f=!0,g=r-105,y=!0;else if(36===r&&36===t.charCodeAt(o+1))A=!0,d=!0;else if(37===r)A=!0,f=!0,g=0,y=!1;else if(45===r){let e=t.charCodeAt(o+1);(e>=48&&e<=57||44===e||46===e)&&(A=!0,p||(c=!1),y=!0)}else 13!==r&&10!==r||(p=!0,d=!1)}}const f=/\$\$.*/,c=/[,\t ]+/;function h(e,t,n){if(e.isPeaktable=!0,e.variables&&2!==Object.keys(e.variables)?function(e,t,n){let s={},l=Object.keys(e.variables),r=l.length;l.forEach((e=>s[e]=[])),e.data=s;let a=t.split(/,? *,?[;\r\n]+ */);for(let i=1;i<a.length;i++){let e=a[i].trim().replace(f,"").split(c);if(e.length%r==0)for(let t=0;t<e.length;t++)s[l[t%r]].push(Number(e[t]));else n.logs.push(`Format error: ${e}`)}}(e,t,n):function(e,t,n){let s={x:[],y:[]};e.data=s;let l=t.split(/,? *,?[;\r\n]+ */);for(let r=1;r<l.length;r++){let t=l[r].trim().replace(f,"").split(c);if(t.length%2==0)for(let n=0;n<t.length;n+=2)s.x.push(Number(t[n])*e.xFactor),s.y.push(Number(t[n+1])*e.yFactor);else n.logs.push(`Format error: ${t}`)}}(e,t,n),e.variables)for(let s in e.variables)e.variables[s].data=e.data[s]}function m(e,t){let n,s=/(\(+|\)+|<+|>+|\s+)/g;e.isXYAdata=!0;let l={x:[],y:[]};e.data=l;let r=t.split(/,? *,?[;\r\n]+ */);for(let a=1;a<r.length;a++)n=r[a].trim().replace(s,"").split(","),l.x.push(Number(n[0])),l.y.push(Number(n[1]))}var d=n(4091),g=n(5520),b=n.n(g);function y(e){if(!(0,d.N)(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");return b()(e.slice())}function A(e,t){let n=function(e){let t=e[0].data.y[0],n=t,s=e.length,l=e[0].data.x.length,r=new Array(s);for(let c=0;c<s;c++){r[c]=e[c].data.y;for(let e=0;e<l;e++){let s=r[c][e];s<t&&(t=s),s>n&&(n=s)}}const a=e[0].data.x[0],i=e[0].data.x[e[0].data.x.length-1],u=e[0].pageValue,o=e[s-1].pageValue;if(a>i)for(let c of r)c.reverse();u>o&&r.reverse();const p=[];for(let c=0;c<r.length;c++){const e=Float64Array.from(r[c]);for(let t=0;t<e.length;t++)e[t]<0&&(e[t]=-e[t]);p.push(y(e))}const f=y(p);return{z:r,minX:Math.min(a,i),maxX:Math.max(a,i),minY:Math.min(u,o),maxY:Math.max(u,o),minZ:t,maxZ:n,noise:f}}(e.spectra);t.noContour||(e.contourLines=function(e,t){let n,s,l,r,a,i,u,o,p,f,c,h,m,d=e.noise,g=e.z,b=g.length,y=g[0].length,A=e.minX,x=(e.maxX-A)/(y-1),N=e.minY,X=(e.maxY-N)/(b-1),T=e.minZ,E=e.maxZ,F=2*t.nbContourLevels,w=new Array(F);for(let O=0;O<F;O++){let e={};w[O]=e;let F=O%2,Y=(E-t.noiseMultiplier*d)*Math.exp((O>>1)-t.nbContourLevels);m=0===F?Y+t.noiseMultiplier*d:0-Y-t.noiseMultiplier*d;let v=[];if(e.zValue=m,e.lines=v,!(m<=T||m>=E))for(let t=0;t<b-1;t++){let e=g[t],d=g[t+1];for(let g=0;g<y-1;g++)n=e[g],s=e[g+1],l=d[g],r=d[g+1],a=n>m,i=s>m,u=l>m,o=r>m,a!==i&&a!==u&&(p=g+(m-n)/(s-n),f=t,c=g,h=t+(m-n)/(l-n),v.push(p*x+A),v.push(f*X+N),v.push(c*x+A),v.push(h*X+N)),o!==i&&o!==u&&(p=g+1,f=t+1-(m-r)/(s-r),c=g+1-(m-r)/(l-r),h=t+1,v.push(p*x+A),v.push(f*X+N),v.push(c*x+A),v.push(h*X+N)),i!==u&&(p=(g+1-(m-s)/(l-s))*x+A,f=(t+(m-s)/(l-s))*X+N,i!==a&&(c=g+1-(m-s)/(n-s),h=t,v.push(p),v.push(f),v.push(c*x+A),v.push(h*X+N)),u!==a&&(c=g,h=t+1-(m-l)/(n-l),v.push(p),v.push(f),v.push(c*x+A),v.push(h*X+N)),i!==o&&(c=g+1,h=t+(m-s)/(r-s),v.push(p),v.push(f),v.push(c*x+A),v.push(h*X+N)),u!==o&&(c=g+(m-l)/(r-l),h=t+1,v.push(p),v.push(f),v.push(c*x+A),v.push(h*X+N)))}}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:w}}(n,t),delete n.z),e.minMax=n}const x={"1H":267522187.44,"2H":41065e3,"3H":285350800,"3He":-203789e3,"7Li":103962e3,"13C":67282840,"14N":19331e3,"15N":-27116e3,"17O":-36264e3,"19F":251662e3,"23Na":70761e3,"27Al":69763e3,"29Si":-5319e4,"31P":108291e3,"57Fe":8681e3,"63Cu":71118e3,"67Zn":16767e3,"129Xe":-73997e3};function N(e,t,n){e.profiling&&e.profiling.push({action:t,time:Date.now()-n.start})}function X(e){let t=e.spectra[0].data;e.chromatogram={times:t.x.slice(),series:{intensity:{dimension:1,data:t.y.slice()}}}}function T(e,t,n){!function(e){for(let t of e){let e=0,n=0;for(let s of t.spectra){if(t.ntuples&&t.ntuples.symbol?(!e&&s.observeFrequency&&(e=s.observeFrequency),!n&&s.shiftOffsetVal&&(n=s.shiftOffsetVal)):(e=s.observeFrequency,n=s.shiftOffsetVal),e&&s.xUnits&&s.xUnits.toUpperCase().includes("HZ")){s.xUnits="PPM",s.xFactor=s.xFactor/e,s.firstX=s.firstX/e,s.lastX=s.lastX/e,s.deltaX=s.deltaX/e;for(let t=0;t<s.data.x.length;t++)s.data.x[t]/=e}if(n){let e=s.firstX-n;s.firstX=s.firstX-e,s.lastX=s.lastX-e;for(let t=0;t<s.data.x.length;t++)s.data.x[t]-=e}if(t.ntuples&&t.ntuples.nucleus&&t.ntuples.symbol)for(let e=0;e<t.ntuples.nucleus.length;e++){let n=t.ntuples.symbol[e],s=t.ntuples.nucleus[e];if(n.startsWith("F")&&!s){if("F1"===n)if(t.tmp.$NUC2)t.ntuples.nucleus[e]=t.tmp.$NUC2;else{let n=t.ntuples.symbol.indexOf("F2");n&&t.ntuples.nucleus[n]&&(t.ntuples.nucleus[e]=t.ntuples.nucleus[n])}"F2"===n&&(t.ntuples.nucleus[e]=t.tmp.$NUC1)}"F2"===n&&(t.yType=t.ntuples.nucleus[0])}if(e&&t.ntuples&&t.ntuples.symbol&&t.ntuples.nucleus){let n="",l=t.ntuples.symbol.indexOf(s.pageSymbol);if(t.ntuples.units&&t.ntuples.units[l]&&(n=t.ntuples.units[l]),"PPM"!==n){if(0!==l)throw Error("Not sure about this ntuples format");let n=x[t.ntuples.nucleus[0]],r=x[t.ntuples.nucleus[1]];if(!n||!r)throw Error("Problem with determination of gyromagnetic ratio");let a=n/r*e;s.pageValue/=a}}}}}(e);for(let s of e){if(Object.keys(s.ntuples).length>0){let e=[],t=Object.keys(s.ntuples);for(let n=0;n<t.length;n++){let l=t[n],r=s.ntuples[l];for(let t=0;t<r.length;t++)e[t]||(e[t]={}),e[t][l]=r[t]}s.ntuples=e}s.twoD&&n.wantXY&&(A(s,n),N(t,"Finished countour plot calculation",n),n.keepSpectra||delete s.spectra),n.chromatogram&&(s.spectra.length>1?a(s):X(s),N(t,"Finished chromatogram calculation",n)),delete s.tmp}}function E(e,t,n){let s=-1,l=-1,r="",a="";if(n.indexOf("++")>0)r=n.replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),a=n.replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");else{r=(n=n.replace(/[^a-zA-Z]/g,"")).charAt(0),a=n.charAt(1),t.variables={};for(let s of n){let n=s.toLowerCase(),l=e.ntuples.symbol.indexOf(s);if(-1===l)throw Error(`Symbol undefined: ${s}`);t.variables[n]={};for(let s in e.ntuples)e.ntuples[s][l]&&(t.variables[n][s.replace(/^var/,"")]=e.ntuples[s][l])}}s=e.ntuples.symbol.indexOf(r),l=e.ntuples.symbol.indexOf(a),-1===s&&(s=0),-1===l&&(l=0),e.ntuples.first&&(e.ntuples.first.length>s&&(t.firstX=e.ntuples.first[s]),e.ntuples.first.length>l&&(t.firstY=e.ntuples.first[l])),e.ntuples.last&&(e.ntuples.last.length>s&&(t.lastX=e.ntuples.last[s]),e.ntuples.last.length>l&&(t.lastY=e.ntuples.last[l])),e.ntuples.vardim&&e.ntuples.vardim.length>s&&(t.nbPoints=e.ntuples.vardim[s]),e.ntuples.factor&&(e.ntuples.factor.length>s&&(t.xFactor=e.ntuples.factor[s]),e.ntuples.factor.length>l&&(t.yFactor=e.ntuples.factor[l])),e.ntuples.units&&(e.ntuples.units.length>s&&(e.ntuples.varname&&e.ntuples.varname[s]?t.xUnits=`${e.ntuples.varname[s]} [${e.ntuples.units[s]}]`:t.xUnits=e.ntuples.units[s]),e.ntuples.units.length>l&&(e.ntuples.varname&&e.ntuples.varname[l]?t.yUnits=`${e.ntuples.varname[l]} [${e.ntuples.units[l]}]`:t.yUnits=e.ntuples.units[l]))}function F(e){e.xFactor||(e.xFactor=1),e.yFactor||(e.yFactor=1)}const w=/[ \t]*,[ \t]*/,O={keepRecordsRegExp:/^$/,canonicDataLabels:!0,canonicMetadataLabels:!1,dynamicTyping:!0,withoutXY:!1,chromatogram:!1,keepSpectra:!1,noContour:!1,nbContourLevels:7,noiseMultiplier:5,profiling:!1};function Y(e,t={}){e=(0,l.Z)(e),(t={...O,...t}).wantXY=!t.withoutXY,t.start=Date.now();let n=[],r={profiling:!!t.profiling&&[],logs:[],entries:[]},a={children:[]},f=a,c=[],d={};if("string"!=typeof e)throw new TypeError("the JCAMP should be a string");N(r,"Before split to LDRS",t);let g=e.replace(/[\r\n]+##/g,"\n##").split("\n##");N(r,"Split to LDRS",t),g[0]&&(g[0]=g[0].replace(/^[\r\n ]*##/,""));for(let l of g){let e=l.indexOf("="),a=e>0?l.substring(0,e):l,g=e>0?l.substring(e+1).trim():"",b=a.replace(/[_ -]/g,"").toUpperCase();if("DATATABLE"===b){let e=g.indexOf("\n");if(-1===e&&(e=g.indexOf("\r")),e>0){let t=g.substring(0,e).split(/[ ,;\t]+/);E(f,d,t[0]),d.datatable=t[0],t[1]&&t[1].indexOf("PEAKS")>-1?b="PEAKTABLE":t[1]&&(t[1].indexOf("XYDATA")||t[0].indexOf("++")>0)&&(b="XYDATA",d.nbPoints&&(d.deltaX=(d.lastX-d.firstX)/(d.nbPoints-1)))}}if("XYDATA"!==b)if("PEAKTABLE"!==b)if("PEAKASSIGNMENTS"!==b){if("TITLE"===b){let e=f;e.children||(e.children=[]),f={spectra:[],ntuples:{},info:{},meta:{},tmp:{}},e.children.push(f),c.push(e),n.push(f),f.title=g}else"DATATYPE"===b?(f.dataType=g,g.match(/(^nd|\snd\s)/i)&&(f.twoD=!0)):"NTUPLES"===b?g.match(/(^nd|\snd\s)/i)&&(f.twoD=!0):"DATACLASS"===b?f.dataClass=g:"XUNITS"===b?d.xUnits=g:"YUNITS"===b?d.yUnits=g:"FIRSTX"===b?d.firstX=Number(g):"LASTX"===b?d.lastX=Number(g):"FIRSTY"===b?d.firstY=Number(g):"LASTY"===b?d.lastY=Number(g):"NPOINTS"===b?d.nbPoints=Number(g):"XFACTOR"===b?d.xFactor=Number(g):"YFACTOR"===b?d.yFactor=Number(g):"MAXX"===b?d.maxX=Number(g):"MINX"===b?d.minX=Number(g):"MAXY"===b?d.maxY=Number(g):"MINY"===b?d.minY=Number(g):"DELTAX"===b?d.deltaX=Number(g):".OBSERVEFREQUENCY"===b||"$SFO1"===b?d.observeFrequency||(d.observeFrequency=Number(g)):".OBSERVENUCLEUS"===b?d.xType||(f.xType=g.replace(/[^a-zA-Z0-9]/g,"")):"$OFFSET"===b?(f.shiftOffsetNum=0,d.shiftOffsetVal||(d.shiftOffsetVal=Number(g))):"$REFERENCEPOINT"===b||("VARNAME"===b?f.ntuples.varname=g.split(w):"SYMBOL"===b?f.ntuples.symbol=g.split(w):"VARTYPE"===b?f.ntuples.vartype=g.split(w):"VARFORM"===b?f.ntuples.varform=g.split(w):"VARDIM"===b?f.ntuples.vardim=o(g.split(w)):"UNITS"===b?f.ntuples.units=g.split(w):"FACTOR"===b?f.ntuples.factor=o(g.split(w)):"FIRST"===b?f.ntuples.first=o(g.split(w)):"LAST"===b?f.ntuples.last=o(g.split(w)):"MIN"===b?f.ntuples.min=o(g.split(w)):"MAX"===b?f.ntuples.max=o(g.split(w)):".NUCLEUS"===b?f.ntuples&&(f.ntuples.nucleus=g.split(w)):"PAGE"===b?(d.page=g.trim(),d.pageValue=Number(g.replace(/^.*=/,"")),d.pageSymbol=d.page.replace(/[=].*/,"")):"RETENTIONTIME"===b?d.pageValue=Number(g):i(b)?d[u(b)]=g:"SAMPLEDESCRIPTION"===b?d.sampleDescription=g:b.startsWith("$NUC")?f.tmp[b]||g.includes("off")||(f.tmp[b]=g.replace(/[<>]/g,"")):"END"===b&&(f=c.pop()));if(f&&f.info&&f.meta&&b.match(t.keepRecordsRegExp)){let e,n,l=g.trim();a.startsWith("$")?(n=t.canonicMetadataLabels?b.substring(1):a.substring(1),e=f.meta):(n=t.canonicDataLabels?b:a,e=f.info),t.dynamicTyping&&(l=s(l)),e[n]?(Array.isArray(e[n])||(e[n]=[e[n]]),e[n].push(l)):e[n]=l}}else t.wantXY&&(g.match(/.*(XYA).*/)&&m(d,g),f.spectra.push(d),d={});else t.wantXY&&(F(d),h(d,g,r),f.spectra.push(d),d={});else t.wantXY&&(F(d),g.match(/.*\+\+.*/)?(d.nbPoints&&(d.deltaX=(d.lastX-d.firstX)/(d.nbPoints-1)),p(d,g)):h(d,g,r),f.spectra.push(d),d={})}return N(r,"Finished parsing",t),T(n,r,t),N(r,"Total time",t),r.entries=a.children,r.flatten=n,r}}}]);