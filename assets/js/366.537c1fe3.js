/*! For license information please see 366.537c1fe3.js.LICENSE.txt */
(self.webpackChunkdocs_react_plot=self.webpackChunkdocs_react_plot||[]).push([[366],{3656:function(t){"use strict";t.exports=function(t,e){return t===e?0:"C"===t?-1:"C"===e?1:"H"===t?-1:"H"===e?1:t<e?-1:1}},4098:function(t,e){var r="undefined"!=typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,a="ArrayBuffer"in t;if(a)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function m(t){var e=new FileReader,r=d(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,r,n=p(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=d(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=h(t),e=u(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype.delete=function(t){delete this.map[h(t)]},c.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},c.prototype.set=function(t,e){this.map[h(t)]=u(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),f(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),f(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),f(t)},n&&(c.prototype[Symbol.iterator]=c.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var r,n,i=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),v.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function w(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];w.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(A){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(t,r){return new Promise((function(n,s){var a=new b(t,r);if(a.signal&&a.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function l(){o.abort()}o.onload=function(){var t,e,r={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;n(new w(i,r))},o.onerror=function(){s(new TypeError("Network request failed"))},o.ontimeout=function(){s(new TypeError("Network request failed"))},o.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},o.open(a.method,a.url,!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&i&&(o.responseType="blob"),a.headers.forEach((function(t,e){o.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",l),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",l)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}E.polyfill=!0,t.fetch||(t.fetch=E,t.Headers=c,t.Request=b,t.Response=w),e.Headers=c,e.Request=b,e.Response=w,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},6230:function(t){t.exports="object"==typeof self?self.FormData:window.FormData},6366:function(t,e,r){"use strict";function n(t){if(4===t.length||5===t.length){let e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1}let e=Number(t);return 0!==e||t.includes("0")?Number.isNaN(e)?t:e:t}r.d(e,{O:function(){return C}});var i=r(5378);const s=["TIC",".RIC","SCANNUMBER"];function a(t){let e=t.spectra,r=e.length,n={times:new Array(r),series:{ms:{dimension:2,data:new Array(r)}}},i=[];for(let a=0;a<s.length;a++){let t=l(s[a]);e[0][t]&&(i.push(t),n.series[t]={dimension:1,data:new Array(r)})}for(let s=0;s<r;s++){let t=e[s];n.times[s]=t.pageValue;for(let e=0;e<i.length;e++)n.series[i[e]].data[s]=Number(t[i[e]]);t.data&&(n.series.ms.data[s]=[t.data.x,t.data.y])}t.chromatogram=n}function o(t){return-1!==s.indexOf(t)}function l(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"")}function h(t){let e=[];for(let r=0;r<t.length;r++)e.push(Number(t[r]));return e}function u(t,e){let r=t.yFactor,n=t.deltaX;t.isXYdata=!0;let i={x:[],y:[]};t.data=i;let s,a=t.firstX,o=t.firstY,l=!1,h=0;for(;h<e.length;h++)if(s=e.charCodeAt(h),13===s||10===s)l=!0;else if(l)break;let u=!0,f=!1,c=!1,p=0,d=!1,m=!1,y=0,g=0,v=!1,b=!1,_=!1,w=0;for(;h<=e.length;h++)if(s=h===e.length?13:e.charCodeAt(h),m)13!==s&&10!==s||(u=!0,m=!1);else if(s<=57&&s>=48)b=!0,w>0?y+=(s-48)/Math.pow(10,w++):(y*=10,y+=s-48);else if(44===s||46===s)b=!0,w++;else{if(b){if(u)u=!1,c&&(_=!0);else if(_)_=!1;else{f?(p=v?0-y:y,c=!0,f=!1):d||(g=v?0-y:y);let t=d?y-1:1;for(let e=0;e<t;e++)c?o+=p:o=g,i.x.push(a),i.y.push(o*r),a+=n}v=!1,y=0,w=0,b=!1,d=!1}if(s<74&&s>63)b=!0,c=!1,y=s-64;else if(s>96&&s<106)b=!0,c=!1,y=s-96,v=!0;else if(115===s)b=!0,d=!0,y=9;else if(s>82&&s<91)b=!0,d=!0,y=s-82;else if(s>73&&s<83)b=!0,f=!0,y=s-73;else if(s>105&&s<115)b=!0,f=!0,y=s-105,v=!0;else if(36===s&&36===e.charCodeAt(h+1))b=!0,m=!0;else if(37===s)b=!0,f=!0,y=0,v=!1;else if(45===s){let t=e.charCodeAt(h+1);(t>=48&&t<=57||44===t||46===t)&&(b=!0,u||(c=!1),v=!0)}else 13!==s&&10!==s||(u=!0,m=!1)}}const f=/\$\$.*/,c=/[,\t ]+/;function p(t,e,r){if(t.isPeaktable=!0,t.variables&&2!==Object.keys(t.variables)?function(t,e,r){let n={},i=Object.keys(t.variables),s=i.length;i.forEach((t=>n[t]=[])),t.data=n;let a=e.split(/,? *,?[;\r\n]+ */);for(let o=1;o<a.length;o++){let t=a[o].trim().replace(f,"").split(c);if(t.length%s==0)for(let e=0;e<t.length;e++)n[i[e%s]].push(Number(t[e]));else r.logs.push(`Format error: ${t}`)}}(t,e,r):function(t,e,r){let n={x:[],y:[]};t.data=n;let i=e.split(/,? *,?[;\r\n]+ */);for(let s=1;s<i.length;s++){let e=i[s].trim().replace(f,"").split(c);if(e.length%2==0)for(let r=0;r<e.length;r+=2)n.x.push(Number(e[r])*t.xFactor),n.y.push(Number(e[r+1])*t.yFactor);else r.logs.push(`Format error: ${e}`)}}(t,e,r),t.variables)for(let n in t.variables)t.variables[n].data=t.data[n]}function d(t,e){let r,n=/(\(+|\)+|<+|>+|\s+)/g;t.isXYAdata=!0;let i={x:[],y:[]};t.data=i;let s=e.split(/,? *,?[;\r\n]+ */);for(let a=1;a<s.length;a++)r=s[a].trim().replace(n,"").split(","),i.x.push(Number(r[0])),i.y.push(Number(r[1]))}var m=r(4091),y=r(5520),g=r.n(y);function v(t){if(!(0,m.N)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");return g()(t.slice())}function b(t,e){let r=function(t){let e=t[0].data.y[0],r=e,n=t.length,i=t[0].data.x.length,s=new Array(n);for(let c=0;c<n;c++){s[c]=t[c].data.y;for(let t=0;t<i;t++){let n=s[c][t];n<e&&(e=n),n>r&&(r=n)}}const a=t[0].data.x[0],o=t[0].data.x[t[0].data.x.length-1],l=t[0].pageValue,h=t[n-1].pageValue;if(a>o)for(let c of s)c.reverse();l>h&&s.reverse();const u=[];for(let c=0;c<s.length;c++){const t=Float64Array.from(s[c]);for(let e=0;e<t.length;e++)t[e]<0&&(t[e]=-t[e]);u.push(v(t))}const f=v(u);return{z:s,minX:Math.min(a,o),maxX:Math.max(a,o),minY:Math.min(l,h),maxY:Math.max(l,h),minZ:e,maxZ:r,noise:f}}(t.spectra);e.noContour||(t.contourLines=function(t,e){let r,n,i,s,a,o,l,h,u,f,c,p,d,m=t.noise,y=t.z,g=y.length,v=y[0].length,b=t.minX,_=(t.maxX-b)/(v-1),w=t.minY,x=(t.maxY-w)/(g-1),E=t.minZ,A=t.maxZ,k=2*e.nbContourLevels,S=new Array(k);for(let O=0;O<k;O++){let t={};S[O]=t;let k=O%2,M=(A-e.noiseMultiplier*m)*Math.exp((O>>1)-e.nbContourLevels);d=0===k?M+e.noiseMultiplier*m:0-M-e.noiseMultiplier*m;let T=[];if(t.zValue=d,t.lines=T,!(d<=E||d>=A))for(let e=0;e<g-1;e++){let t=y[e],m=y[e+1];for(let y=0;y<v-1;y++)r=t[y],n=t[y+1],i=m[y],s=m[y+1],a=r>d,o=n>d,l=i>d,h=s>d,a!==o&&a!==l&&(u=y+(d-r)/(n-r),f=e,c=y,p=e+(d-r)/(i-r),T.push(u*_+b),T.push(f*x+w),T.push(c*_+b),T.push(p*x+w)),h!==o&&h!==l&&(u=y+1,f=e+1-(d-s)/(n-s),c=y+1-(d-s)/(i-s),p=e+1,T.push(u*_+b),T.push(f*x+w),T.push(c*_+b),T.push(p*x+w)),o!==l&&(u=(y+1-(d-n)/(i-n))*_+b,f=(e+(d-n)/(i-n))*x+w,o!==a&&(c=y+1-(d-n)/(r-n),p=e,T.push(u),T.push(f),T.push(c*_+b),T.push(p*x+w)),l!==a&&(c=y,p=e+1-(d-i)/(r-i),T.push(u),T.push(f),T.push(c*_+b),T.push(p*x+w)),o!==h&&(c=y+1,p=e+(d-n)/(s-n),T.push(u),T.push(f),T.push(c*_+b),T.push(p*x+w)),l!==h&&(c=y+(d-i)/(s-i),p=e+1,T.push(u),T.push(f),T.push(c*_+b),T.push(p*x+w)))}}return{minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY,segments:S}}(r,e),delete r.z),t.minMax=r}const _={"1H":267522187.44,"2H":41065e3,"3H":285350800,"3He":-203789e3,"7Li":103962e3,"13C":67282840,"14N":19331e3,"15N":-27116e3,"17O":-36264e3,"19F":251662e3,"23Na":70761e3,"27Al":69763e3,"29Si":-5319e4,"31P":108291e3,"57Fe":8681e3,"63Cu":71118e3,"67Zn":16767e3,"129Xe":-73997e3};r(4098),r(6230),r(3656);r(7460);r(5111);r(2830);r(7513);var w=r(375);Math.LN2,Math.sqrt(Math.PI/Math.LN2),Math.sqrt(3),Math.sqrt(2*Math.LN2),Math.sqrt(2*Math.LN2);r(13);r(9645);function x(t){const e=(t-1)/2,r=new Array(t),n=new Array(t);for(let a=0;a<t;a++)r[a]=t-1-a-e,n[a]=Math.sqrt(e*(e+1)-r[a]*(r[a]+1));const i=E(n,1,t,t);for(let a=0;a<t;a++)n[a]=Math.sqrt(e*(e+1)-r[a]*(r[a]-1));const s=E(n,-1,t,t);return{x:i.clone().add(s).mul(.5),y:s.clone().mul(-1).add(i).mul(-.5),z:E(r,0,t,t),m:s,p:i}}function E(t,e,r,n){const i=new w.A(r,n,{initialCapacity:20});for(let s=0;s<t.length;s++)s-e>=0&&s-e<r&&s<n&&i.set(s-e,s,t[s]);return i}x(2);r(2052);r(3910);r(530);function A(t,e,r){t.profiling&&t.profiling.push({action:e,time:Date.now()-r.start})}function k(t){let e=t.spectra[0].data;t.chromatogram={times:e.x.slice(),series:{intensity:{dimension:1,data:e.y.slice()}}}}function S(t,e,r){!function(t){for(let e of t){let t=0,r=0;for(let n of e.spectra){if(e.ntuples&&e.ntuples.symbol?(!t&&n.observeFrequency&&(t=n.observeFrequency),!r&&n.shiftOffsetVal&&(r=n.shiftOffsetVal)):(t=n.observeFrequency,r=n.shiftOffsetVal),t&&n.xUnits&&n.xUnits.toUpperCase().includes("HZ")){n.xUnits="PPM",n.xFactor=n.xFactor/t,n.firstX=n.firstX/t,n.lastX=n.lastX/t,n.deltaX=n.deltaX/t;for(let e=0;e<n.data.x.length;e++)n.data.x[e]/=t}if(r){let t=n.firstX-r;n.firstX=n.firstX-t,n.lastX=n.lastX-t;for(let e=0;e<n.data.x.length;e++)n.data.x[e]-=t}if(e.ntuples&&e.ntuples.nucleus&&e.ntuples.symbol)for(let t=0;t<e.ntuples.nucleus.length;t++){let r=e.ntuples.symbol[t],n=e.ntuples.nucleus[t];if(r.startsWith("F")&&!n){if("F1"===r)if(e.tmp.$NUC2)e.ntuples.nucleus[t]=e.tmp.$NUC2;else{let r=e.ntuples.symbol.indexOf("F2");r&&e.ntuples.nucleus[r]&&(e.ntuples.nucleus[t]=e.ntuples.nucleus[r])}"F2"===r&&(e.ntuples.nucleus[t]=e.tmp.$NUC1)}"F2"===r&&(e.yType=e.ntuples.nucleus[0])}if(t&&e.ntuples&&e.ntuples.symbol&&e.ntuples.nucleus){let r="",i=e.ntuples.symbol.indexOf(n.pageSymbol);if(e.ntuples.units&&e.ntuples.units[i]&&(r=e.ntuples.units[i]),"PPM"!==r){if(0!==i)throw Error("Not sure about this ntuples format");let r=_[e.ntuples.nucleus[0]],s=_[e.ntuples.nucleus[1]];if(!r||!s)throw Error("Problem with determination of gyromagnetic ratio");let a=r/s*t;n.pageValue/=a}}}}}(t);for(let n of t){if(Object.keys(n.ntuples).length>0){let t=[],e=Object.keys(n.ntuples);for(let r=0;r<e.length;r++){let i=e[r],s=n.ntuples[i];for(let e=0;e<s.length;e++)t[e]||(t[e]={}),t[e][i]=s[e]}n.ntuples=t}n.twoD&&r.wantXY&&(b(n,r),A(e,"Finished countour plot calculation",r),r.keepSpectra||delete n.spectra),r.chromatogram&&(n.spectra.length>1?a(n):k(n),A(e,"Finished chromatogram calculation",r)),delete n.tmp}}function O(t,e,r){let n=-1,i=-1,s="",a="";if(r.indexOf("++")>0)s=r.replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),a=r.replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");else{s=(r=r.replace(/[^a-zA-Z]/g,"")).charAt(0),a=r.charAt(1),e.variables={};for(let n of r){let r=n.toLowerCase(),i=t.ntuples.symbol.indexOf(n);if(-1===i)throw Error(`Symbol undefined: ${n}`);e.variables[r]={};for(let n in t.ntuples)t.ntuples[n][i]&&(e.variables[r][n.replace(/^var/,"")]=t.ntuples[n][i])}}n=t.ntuples.symbol.indexOf(s),i=t.ntuples.symbol.indexOf(a),-1===n&&(n=0),-1===i&&(i=0),t.ntuples.first&&(t.ntuples.first.length>n&&(e.firstX=t.ntuples.first[n]),t.ntuples.first.length>i&&(e.firstY=t.ntuples.first[i])),t.ntuples.last&&(t.ntuples.last.length>n&&(e.lastX=t.ntuples.last[n]),t.ntuples.last.length>i&&(e.lastY=t.ntuples.last[i])),t.ntuples.vardim&&t.ntuples.vardim.length>n&&(e.nbPoints=t.ntuples.vardim[n]),t.ntuples.factor&&(t.ntuples.factor.length>n&&(e.xFactor=t.ntuples.factor[n]),t.ntuples.factor.length>i&&(e.yFactor=t.ntuples.factor[i])),t.ntuples.units&&(t.ntuples.units.length>n&&(t.ntuples.varname&&t.ntuples.varname[n]?e.xUnits=`${t.ntuples.varname[n]} [${t.ntuples.units[n]}]`:e.xUnits=t.ntuples.units[n]),t.ntuples.units.length>i&&(t.ntuples.varname&&t.ntuples.varname[i]?e.yUnits=`${t.ntuples.varname[i]} [${t.ntuples.units[i]}]`:e.yUnits=t.ntuples.units[i]))}function M(t){t.xFactor||(t.xFactor=1),t.yFactor||(t.yFactor=1)}const T=/[ \t]*,[ \t]*/,R={keepRecordsRegExp:/^$/,canonicDataLabels:!0,canonicMetadataLabels:!1,dynamicTyping:!0,withoutXY:!1,chromatogram:!1,keepSpectra:!1,noContour:!1,nbContourLevels:7,noiseMultiplier:5,profiling:!1};function C(t,e={}){t=(0,i.Z)(t),(e={...R,...e}).wantXY=!e.withoutXY,e.start=Date.now();let r=[],s={profiling:!!e.profiling&&[],logs:[],entries:[]},a={children:[]},f=a,c=[],m={};if("string"!=typeof t)throw new TypeError("the JCAMP should be a string");A(s,"Before split to LDRS",e);let y=t.replace(/[\r\n]+##/g,"\n##").split("\n##");A(s,"Split to LDRS",e),y[0]&&(y[0]=y[0].replace(/^[\r\n ]*##/,""));for(let i of y){let t=i.indexOf("="),a=t>0?i.substring(0,t):i,y=t>0?i.substring(t+1).trim():"",g=a.replace(/[_ -]/g,"").toUpperCase();if("DATATABLE"===g){let t=y.indexOf("\n");if(-1===t&&(t=y.indexOf("\r")),t>0){let e=y.substring(0,t).split(/[ ,;\t]+/);O(f,m,e[0]),m.datatable=e[0],e[1]&&e[1].indexOf("PEAKS")>-1?g="PEAKTABLE":e[1]&&(e[1].indexOf("XYDATA")||e[0].indexOf("++")>0)&&(g="XYDATA",m.deltaX=(m.lastX-m.firstX)/(m.nbPoints-1))}}if("XYDATA"!==g)if("PEAKTABLE"!==g)if("PEAKASSIGNMENTS"!==g){if("TITLE"===g){let t=f;t.children||(t.children=[]),f={spectra:[],ntuples:{},info:{},meta:{},tmp:{}},t.children.push(f),c.push(t),r.push(f),f.title=y}else"DATATYPE"===g?(f.dataType=y,y.match(/(^nd|\snd\s)/i)&&(f.twoD=!0)):"NTUPLES"===g?y.match(/(^nd|\snd\s)/i)&&(f.twoD=!0):"DATACLASS"===g?f.dataClass=y:"XUNITS"===g?m.xUnits=y:"YUNITS"===g?m.yUnits=y:"FIRSTX"===g?m.firstX=Number(y):"LASTX"===g?m.lastX=Number(y):"FIRSTY"===g?m.firstY=Number(y):"LASTY"===g?m.lastY=Number(y):"NPOINTS"===g?m.nbPoints=Number(y):"XFACTOR"===g?m.xFactor=Number(y):"YFACTOR"===g?m.yFactor=Number(y):"MAXX"===g?m.maxX=Number(y):"MINX"===g?m.minX=Number(y):"MAXY"===g?m.maxY=Number(y):"MINY"===g?m.minY=Number(y):"DELTAX"===g?m.deltaX=Number(y):".OBSERVEFREQUENCY"===g||"$SFO1"===g?m.observeFrequency||(m.observeFrequency=Number(y)):".OBSERVENUCLEUS"===g?m.xType||(f.xType=y.replace(/[^a-zA-Z0-9]/g,"")):"$OFFSET"===g?(f.shiftOffsetNum=0,m.shiftOffsetVal||(m.shiftOffsetVal=Number(y))):"$REFERENCEPOINT"===g||("VARNAME"===g?f.ntuples.varname=y.split(T):"SYMBOL"===g?f.ntuples.symbol=y.split(T):"VARTYPE"===g?f.ntuples.vartype=y.split(T):"VARFORM"===g?f.ntuples.varform=y.split(T):"VARDIM"===g?f.ntuples.vardim=h(y.split(T)):"UNITS"===g?f.ntuples.units=y.split(T):"FACTOR"===g?f.ntuples.factor=h(y.split(T)):"FIRST"===g?f.ntuples.first=h(y.split(T)):"LAST"===g?f.ntuples.last=h(y.split(T)):"MIN"===g?f.ntuples.min=h(y.split(T)):"MAX"===g?f.ntuples.max=h(y.split(T)):".NUCLEUS"===g?f.ntuples&&(f.ntuples.nucleus=y.split(T)):"PAGE"===g?(m.page=y.trim(),m.pageValue=Number(y.replace(/^.*=/,"")),m.pageSymbol=m.page.replace(/[=].*/,"")):"RETENTIONTIME"===g?m.pageValue=Number(y):o(g)?m[l(g)]=y:"SAMPLEDESCRIPTION"===g?m.sampleDescription=y:g.startsWith("$NUC")?f.tmp[g]||y.includes("off")||(f.tmp[g]=y.replace(/[<>]/g,"")):"END"===g&&(f=c.pop()));if(f&&f.info&&f.meta&&g.match(e.keepRecordsRegExp)){let t,r,i=y.trim();a.startsWith("$")?(r=e.canonicMetadataLabels?g.substring(1):a.substring(1),t=f.meta):(r=e.canonicDataLabels?g:a,t=f.info),e.dynamicTyping&&(i=n(i)),t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(i)):t[r]=i}}else e.wantXY&&(y.match(/.*(XYA).*/)&&d(m,y),f.spectra.push(m),m={});else e.wantXY&&(M(m),p(m,y,s),f.spectra.push(m),m={});else e.wantXY&&(M(m),y.match(/.*\+\+.*/)?(m.deltaX=(m.lastX-m.firstX)/(m.nbPoints-1),u(m,y)):p(m,y,s),f.spectra.push(m),m={})}return A(s,"Finished parsing",e),S(r,s,e),A(s,"Total time",e),s.entries=a.children,s.flatten=r,s}},530:function(t){"use strict";function e(t){this.value=t,this.parent=null,this.rank=0}t.exports=class{constructor(){this.nodes=new Map}add(t){var r=this.nodes.get(t);return r||(r=new e(t),this.nodes.set(t,r)),r}union(t,e){const r=this.find(t),n=this.find(e);r!==n&&(r.rank<n.rank?r.parent=n:r.rank>n.rank?n.parent=r:(n.parent=r,r.rank++))}find(t){for(var e=t;null!==e.parent;)e=e.parent;for(var r=t;null!==r.parent;){var n=r;r=r.parent,n.parent=e}return e}connected(t,e){return this.find(t)===this.find(e)}}},7345:function(t,e,r){"use strict";var n=r(5571),i={DEBUG:!1,ifft2DArray:function(t,e,r){var i=new Array(e*r),s=e/2,a=2*(r-1);n.init(s);for(var o={re:new Array(s),im:new Array(s)},l=0;l<r;l++){for(var h=s-1;h>=0;h--)o.re[h]=t[2*h*r+l],o.im[h]=t[(2*h+1)*r+l];n.bt(o.re,o.im);for(h=s-1;h>=0;h--)i[2*h*r+l]=o.re[h],i[(2*h+1)*r+l]=o.im[h]}var u=new Array(s*a);n.init(a);var f={re:new Array(a),im:new Array(a)},c=a*s;for(h=0;h<e;h+=2){f.re[0]=i[h*r],f.im[0]=i[(h+1)*r];for(l=1;l<r;l++)f.re[l]=i[h*r+l],f.im[l]=i[(h+1)*r+l],f.re[a-l]=i[h*r+l],f.im[a-l]=-i[(h+1)*r+l];n.bt(f.re,f.im);var p=h/2*a;for(l=a-1;l>=0;l--)u[p+l]=f.re[l]/c}return u},fft2DArray:function(t,e,r,i){Object.assign({},{inplace:!0});var s=r/2+1,a=2*e,o=new Array(a*s);n.init(r);for(var l,h,u,f,c,p={re:new Array(r),im:new Array(r)},d={re:new Array(r),im:new Array(r)},m={re:new Array(r),im:new Array(r)},y=0;y<e/2;y++){l=2*y*r,p.re=t.slice(l,l+r),l=(2*y+1)*r,p.im=t.slice(l,l+r),n.fft1d(p.re,p.im),this.reconstructTwoRealFFT(p,d,m),h=4*y*s,u=(4*y+1)*s,f=(4*y+2)*s,c=(4*y+3)*s;for(var g=s-1;g>=0;g--)o[h+g]=d.re[g],o[u+g]=d.im[g],o[f+g]=m.re[g],o[c+g]=m.im[g]}d=null,m=null;var v=new Array(a*s);n.init(e);for(var b={re:new Array(e),im:new Array(e)},_=s-1;_>=0;_--){for(y=e-1;y>=0;y--)b.re[y]=o[2*y*s+_],b.im[y]=o[(2*y+1)*s+_],isNaN(b.re[y])&&(b.re[y]=0),isNaN(b.im[y])&&(b.im[y]=0);n.fft1d(b.re,b.im);for(y=e-1;y>=0;y--)v[2*y*s+_]=b.re[y],v[(2*y+1)*s+_]=b.im[y]}return v},reconstructTwoRealFFT:function(t,e,r){var n,i,s,a,o,l=t.re.length;e.re[0]=t.re[0],e.im[0]=0,r.re[0]=t.im[0],r.im[0]=0;for(var h=l/2;h>0;h--)o=l-h,n=.5*(t.re[h]-t.re[o]),i=.5*(t.re[h]+t.re[o]),s=.5*(t.im[h]-t.im[o]),a=.5*(t.im[h]+t.im[o]),e.re[h]=i,e.im[h]=s,e.re[o]=i,e.im[o]=-s,r.re[h]=a,r.im[h]=-n,r.re[o]=a,r.im[o]=n},convolute2DI:function(t,e,r,n){for(var i,s,a=0;a<r/2;a++)for(var o=0;o<n;o++)i=t[2*a*n+o]*e[2*a*n+o]-t[(2*a+1)*n+o]*e[(2*a+1)*n+o],s=t[2*a*n+o]*e[(2*a+1)*n+o]+t[(2*a+1)*n+o]*e[2*a*n+o],t[2*a*n+o]=i,t[(2*a+1)*n+o]=s},convolute:function(t,e,r,n,i){for(var s=new Array(n*r),a=0;a<r*n;a++)s[a]=t[a];s=this.fft2DArray(s,r,n);var o,l=e.length,h=e[0].length,u=new Array(n*r);for(a=0;a<n*r;a++)u[a]=0;for(var f=Math.floor((l-1)/2),c=Math.floor((h-1)/2),p=0;p<l;p++){o=(p-f+r)%r;for(var d=0;d<h;d++)u[o*n+(d-c+n)%n]=e[p][d]}u=this.fft2DArray(u,r,n);var m=2*r,y=n/2+1;return this.convolute2DI(s,u,m,y),this.ifft2DArray(s,m,y)},toRadix2:function(t,e,r){var n,i,s,a,o=r,l=e;if(0===r||0!=(r&r-1)){for(o=0;r>>++o!=0;);(o=1<<o)-r}if(0===e||0!=(e&e-1)){for(l=0;e>>++l!=0;);((l=1<<l)-e)*o}if(l==e&&o==r)return{data:t,rows:e,cols:r};var h=new Array(l*o),u=Math.floor((l-e)/2)-e,f=Math.floor((o-r)/2)-r;for(n=0;n<l;n++)for(s=n*o,a=(n-u)%e*r,i=0;i<o;i++)h[s+i]=t[a+(i-f)%r];return{data:h,rows:l,cols:o}},crop:function(t,e,r,n,i,s){if(e==n&&r==i)return t;Object.assign({},s);var a,o,l,h,u=new Array(i*n),f=Math.floor((e-n)/2),c=Math.floor((r-i)/2);for(l=0;l<n;l++)for(a=l*i,o=(l+f)*r,h=0;h<i;h++)u[a+h]=t[o+(h+c)];return u}};t.exports=i},5571:function(t,e){(function(){var t,r="0.3.0",n="2013-03";(t=e).toString=function(){return"version "+r+", released "+n};for(var i=0,s=null,a=null,o={init:function(t){if(0===t||0!=(t&t-1))throw new Error("init: radix-2 required");i=t,o._initArray(),o._makeBitReversalTable(),o._makeCosSinTable()},fft1d:function(t,e){o.fft(t,e,1)},ifft1d:function(t,e){var r=1/i;o.fft(t,e,-1);for(var n=0;n<i;n++)t[n]*=r,e[n]*=r},bt1d:function(t,e){o.fft(t,e,-1)},fft2d:function(t,e){for(var r=[],n=[],s=0,a=0;a<i;a++){s=a*i;for(var l=0;l<i;l++)r[l]=t[l+s],n[l]=e[l+s];o.fft1d(r,n);for(var h=0;h<i;h++)t[h+s]=r[h],e[h+s]=n[h]}for(var u=0;u<i;u++){for(var f=0;f<i;f++)s=u+f*i,r[f]=t[s],n[f]=e[s];o.fft1d(r,n);for(var c=0;c<i;c++)t[s=u+c*i]=r[c],e[s]=n[c]}},ifft2d:function(t,e){for(var r=[],n=[],s=0,a=0;a<i;a++){s=a*i;for(var l=0;l<i;l++)r[l]=t[l+s],n[l]=e[l+s];o.ifft1d(r,n);for(var h=0;h<i;h++)t[h+s]=r[h],e[h+s]=n[h]}for(var u=0;u<i;u++){for(var f=0;f<i;f++)s=u+f*i,r[f]=t[s],n[f]=e[s];o.ifft1d(r,n);for(var c=0;c<i;c++)t[s=u+c*i]=r[c],e[s]=n[c]}},fft:function(t,e,r){for(var n,o,l,h,u,f,c,p,d,m=i>>2,y=0;y<i;y++)y<(h=s[y])&&(u=t[y],t[y]=t[h],t[h]=u,u=e[y],e[y]=e[h],e[h]=u);for(var g=1;g<i;g<<=1){o=0,n=i/(g<<1);for(var v=0;v<g;v++){f=a[o+m],c=r*a[o];for(var b=v;b<i;b+=g<<1)p=f*t[l=b+g]+c*e[l],d=f*e[l]-c*t[l],t[l]=t[b]-p,t[b]+=p,e[l]=e[b]-d,e[b]+=d;o+=n}}},_initArray:function(){s="undefined"!=typeof Uint32Array?new Uint32Array(i):[],a="undefined"!=typeof Float64Array?new Float64Array(1.25*i):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var t=0,e=0,r=0;for(s[0]=0;++t<i;){for(r=i>>1;r<=e;)e-=r,r>>=1;e+=r,s[t]=e}},_makeCosSinTable:function(){var t=i>>1,e=i>>2,r=i>>3,n=t+e,s=Math.sin(Math.PI/i),o=2*s*s,l=Math.sqrt(o*(2-o)),h=a[e]=1,u=a[0]=0;s=2*o;for(var f=1;f<r;f++)o+=s*(h-=o),l-=s*(u+=l),a[f]=u,a[e-f]=h;0!==r&&(a[r]=Math.sqrt(.5));for(var c=0;c<e;c++)a[t-c]=a[c];for(var p=0;p<n;p++)a[p+t]=-a[p]}},l=["init","fft1d","ifft1d","fft2d","ifft2d"],h=0;h<l.length;h++)t[l[h]]=o[l[h]];return t.bt=o.bt1d,t.fft=o.fft1d,t.ifft=o.ifft1d,t}).call(this)},3910:function(t,e,r){"use strict";r(7345),r(5571)},4665:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var n=r(7513),i=r.n(n),s=r(6563);const a=2147483647,o=[a,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];function l(t){let e=i()(o,t,s.j);return e<0&&(e=~e),o[e]}o.sort(s.j);class h{constructor(t={}){if(t instanceof h)return this.table=t.table.slice(),this.values=t.values.slice(),this.state=t.state.slice(),this.minLoadFactor=t.minLoadFactor,this.maxLoadFactor=t.maxLoadFactor,this.distinct=t.distinct,this.freeEntries=t.freeEntries,this.lowWaterMark=t.lowWaterMark,void(this.highWaterMark=t.maxLoadFactor);const e=void 0===t.initialCapacity?150:t.initialCapacity;if(e<0)throw new RangeError(`initial capacity must not be less than zero: ${e}`);const r=void 0===t.minLoadFactor?.16666666666666666:t.minLoadFactor,n=void 0===t.maxLoadFactor?.6666666666666666:t.maxLoadFactor;if(r<0||r>=1)throw new RangeError(`invalid minLoadFactor: ${r}`);if(n<=0||n>=1)throw new RangeError(`invalid maxLoadFactor: ${n}`);if(r>=n)throw new RangeError(`minLoadFactor (${r}) must be smaller than maxLoadFactor (${n})`);let i=e;i=i/n|0,i=l(i),0===i&&(i=1),this.table=c(i),this.values=c(i),this.state=c(i),this.minLoadFactor=r,this.maxLoadFactor=i===a?1:n,this.distinct=0,this.freeEntries=i,this.lowWaterMark=0,this.highWaterMark=u(i,this.maxLoadFactor)}clone(){return new h(this)}get size(){return this.distinct}get(t){const e=this.indexOfKey(t);return e<0?0:this.values[e]}set(t,e){let r=this.indexOfInsertion(t);if(r<0)return r=-r-1,this.values[r]=e,!1;if(this.distinct>this.highWaterMark){const r=f(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(r),this.set(t,e)}if(this.table[r]=t,this.values[r]=e,0===this.state[r]&&this.freeEntries--,this.state[r]=1,this.distinct++,this.freeEntries<1){const t=f(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(t)}return!0}remove(t,e){const r=this.indexOfKey(t);return!(r<0)&&(this.state[r]=2,this.distinct--,e||this.maybeShrinkCapacity(),!0)}delete(t,e){const r=this.indexOfKey(t);return!(r<0)&&(this.state[r]=0,this.distinct--,e||this.maybeShrinkCapacity(),!0)}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){const n=(t=this.distinct,e=this.minLoadFactor,r=this.maxLoadFactor,l(Math.max(t+1,4*t/(e+3*r)|0)));this.rehash(n)}var t,e,r}containsKey(t){return this.indexOfKey(t)>=0}indexOfKey(t){const e=this.table,r=this.state,n=this.table.length,i=2147483647&t;let s=i%n,a=i%(n-2);for(0===a&&(a=1);0!==r[s]&&(2===r[s]||e[s]!==t);)s-=a,s<0&&(s+=n);return 0===r[s]?-1:s}containsValue(t){return this.indexOfValue(t)>=0}indexOfValue(t){const e=this.values,r=this.state;for(var n=0;n<r.length;n++)if(1===r[n]&&e[n]===t)return n;return-1}indexOfInsertion(t){const e=this.table,r=this.state,n=e.length,i=2147483647&t;let s=i%n,a=i%(n-2);for(0===a&&(a=1);1===r[s]&&e[s]!==t;)s-=a,s<0&&(s+=n);if(2===r[s]){const i=s;for(;0!==r[s]&&(2===r[s]||e[s]!==t);)s-=a,s<0&&(s+=n);0===r[s]&&(s=i)}return 1===r[s]?-s-1:s}ensureCapacity(t){if(this.table.length<t){const e=l(t);this.rehash(e)}}rehash(t){const e=this.table.length;if(t<=this.distinct)throw new Error("Unexpected");const r=this.table,n=this.values,i=this.state,s=c(t),a=c(t),o=c(t);var l,h;this.lowWaterMark=(l=t,h=this.minLoadFactor,l*h|0),this.highWaterMark=u(t,this.maxLoadFactor),this.table=s,this.values=a,this.state=o,this.freeEntries=t-this.distinct;for(var f=0;f<e;f++)if(1===i[f]){var p=r[f],d=this.indexOfInsertion(p);s[d]=p,a[d]=n[f],o[d]=1}}forEachKey(t){for(var e=0;e<this.state.length;e++)if(1===this.state[e]&&!t(this.table[e]))return!1;return!0}forEachValue(t){for(var e=0;e<this.state.length;e++)if(1===this.state[e]&&!t(this.values[e]))return!1;return!0}forEachPair(t){for(var e=0;e<this.state.length;e++)if(1===this.state[e]&&!t(this.table[e],this.values[e]))return!1;return!0}}function u(t,e){return Math.min(t-2,t*e|0)}function f(t,e,r){return l(Math.max(t+1,4*t/(3*e+r)|0))}function c(t){return Array(t).fill(0)}},2830:function(t){"use strict";const e={threshold:0,out:"assignment"};function r(t){var e=Math.sqrt(2*t.length+.25)-.5,r=[],n=new Array(e),i=e,s=0,a=[];for(s=e-1;s>=0;s--)n[s]=1;for(var o=-1,l=[];i>0;){if(0===l.length){for(a=new Array(e),s=0;s<e;s++)a[s]=0;for(r.push(a),o=0;0==n[o];o++);}else o=l.splice(0,1);a[o]=1,n[o]=0,i--;var h=new Array(e);for(s=0;s<e;s++){var u=Math.max(o,s),f=Math.min(o,s);h[s]=t[f*(2*e-f-1)/2+u],1==h[s]&&1==n[s]&&0==a[s]&&(l.push(s),a[s]=1)}}return r}t.exports=function(t,n){const i=Object.assign({},e,n);var s,a;if("number"==typeof t[0])s=r(t);else if("object"==typeof t[0]){for(var o=t.length,l=new Array(o*(o+1)/2),h=0,u=0;u<o;u++)for(var f=u;f<o;f++)t[u][f]>i.threshold?l[h++]=1:l[h++]=0;s=r(l)}if("indexes"===i.out||"values"===i.out){var c=new Array(s.length);for(u=0;u<s.length;u++)for(c[u]=[],f=0;f<s[u].length;f++)0!=s[u][f]&&c[u].push(f);if("values"===i.out){var p=new Array(c.length);for(u=0;u<c.length;u++)for(p[u]=new Array(c[u].length),f=0;f<c[u].length;f++)for(p[u][f]=new Array(c[u].length),a=0;a<c[u].length;a++)p[u][f][a]=t[c[u][f]][c[u][a]];return p}return c}return s}},375:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:function(){return SparseMatrix}});var ml_hash_table__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4665);class SparseMatrix{constructor(t,e,r={}){if(t instanceof SparseMatrix){const e=t;this._init(e.rows,e.columns,e.elements.clone(),e.threshold)}else if(Array.isArray(t)){const n=t;t=n.length,r=e||{},e=n[0].length,this._init(t,e,new ml_hash_table__WEBPACK_IMPORTED_MODULE_0__.Z(r),r.threshold);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let i=n[r][t];this.threshold&&Math.abs(i)<this.threshold&&(i=0),0!==i&&this.elements.set(r*e+t,n[r][t])}}else this._init(t,e,new ml_hash_table__WEBPACK_IMPORTED_MODULE_0__.Z(r),r.threshold)}_init(t,e,r,n){this.rows=t,this.columns=e,this.elements=r,this.threshold=n||0}static eye(t=1,e=t){const r=Math.min(t,e),n=new SparseMatrix(t,e,{initialCapacity:r});for(let i=0;i<r;i++)n.set(i,i,1);return n}clone(){return new SparseMatrix(this)}to2DArray(){const t=new Array(this.rows);for(let e=0;e<this.rows;e++){t[e]=new Array(this.columns);for(let r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;let t=!0;return this.forEachNonZero(((e,r,n)=>this.get(r,e)!==n?(t=!1,!1):n)),t}bandWidth(){let t=this.columns,e=-1;return this.forEachNonZero(((r,n,i)=>{let s=r-n;return t=Math.min(t,s),e=Math.max(e,s),i})),e-t}isBanded(t){return this.bandWidth()<=t}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(t,e){return this.elements.get(t*this.columns+e)}set(t,e,r){return this.threshold&&Math.abs(r)<this.threshold&&(r=0),0===r?this.elements.remove(t*this.columns+e):this.elements.set(t*this.columns+e,r),this}mmul(t){this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");const e=this.rows,r=t.columns,n=new SparseMatrix(e,r);return this.forEachNonZero(((e,r,i)=>(t.forEachNonZero(((t,s,a)=>(r===t&&n.set(e,s,n.get(e,s)+i*a),a))),i))),n}kroneckerProduct(t){const e=this.rows,r=this.columns,n=t.rows,i=t.columns,s=new SparseMatrix(e*n,r*i,{initialCapacity:this.cardinality*t.cardinality});return this.forEachNonZero(((e,r,a)=>(t.forEachNonZero(((t,o,l)=>(s.set(n*e+t,i*r+o,a*l),l))),a))),s}forEachNonZero(t){return this.elements.forEachPair(((e,r)=>{const n=e/this.columns|0,i=e%this.columns;let s=t(n,i,r);return!1!==s&&(this.threshold&&Math.abs(s)<this.threshold&&(s=0),s!==r&&(0===s?this.elements.remove(e,!0):this.elements.set(e,s)),!0)})),this.elements.maybeShrinkCapacity(),this}getNonZeros(){const t=this.cardinality,e=new Array(t),r=new Array(t),n=new Array(t);let i=0;return this.forEachNonZero(((t,s,a)=>(e[i]=t,r[i]=s,n[i]=a,i++,a))),{rows:e,columns:r,values:n}}setThreshold(t){return 0!==t&&t!==this.threshold&&(this.threshold=t,this.forEachNonZero(((t,e,r)=>r))),this}transpose(){let t=new SparseMatrix(this.columns,this.rows,{initialCapacity:this.cardinality});return this.forEachNonZero(((e,r,n)=>(t.set(r,e,n),n))),t}isEmpty(){return 0===this.rows||0===this.columns}}SparseMatrix.prototype.klass="Matrix",SparseMatrix.identity=SparseMatrix.eye,SparseMatrix.prototype.tensorProduct=SparseMatrix.prototype.kroneckerProduct;let inplaceOperator="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",inplaceOperatorScalar="\n(function %name%S(value) {\n    this.forEachNonZero((i, j, v) => v %op% value);\n    return this;\n})\n",inplaceOperatorMatrix="\n(function %name%M(matrix) {\n    matrix.forEachNonZero((i, j, v) => {\n        this.set(i, j, this.get(i, j) %op% v);\n        return v;\n    });\n    return this;\n})\n",staticOperator="\n(function %name%(matrix, value) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%(value);\n})\n",inplaceMethod="\n(function %name%() {\n    this.forEachNonZero((i, j, v) => %method%(v));\n    return this;\n})\n",staticMethod="\n(function %name%(matrix) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%();\n})\n";const operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(const operator of operators)for(let i=1;i<operator.length;i++)SparseMatrix.prototype[operator[i]]=eval(fillTemplateFunction(inplaceOperator,{name:operator[i],op:operator[0]})),SparseMatrix.prototype[`${operator[i]}S`]=eval(fillTemplateFunction(inplaceOperatorScalar,{name:`${operator[i]}S`,op:operator[0]})),SparseMatrix.prototype[`${operator[i]}M`]=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:`${operator[i]}M`,op:operator[0]})),SparseMatrix[operator[i]]=eval(fillTemplateFunction(staticOperator,{name:operator[i]}));let methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach((function(t){methods.push([`Math.${t}`,t])}));for(const method of methods)for(let i=1;i<method.length;i++)SparseMatrix.prototype[method[i]]=eval(fillTemplateFunction(inplaceMethod,{name:method[i],method:method[0]})),SparseMatrix[method[i]]=eval(fillTemplateFunction(staticMethod,{name:method[i]}));function fillTemplateFunction(t,e){for(const r in e)t=t.replace(new RegExp(`%${r}%`,"g"),e[r]);return t}},2052:function(t){"use strict";t.exports=class{constructor(t){this.length=0,this.elements=[],this.compatator=t||function(t,e){return t-e}}size(){return this.elements.length}last(){return this.elements[this.length-1]}first(){return this.elements[0]}isEmpty(){return 0===this.size()}pollLast(){return this.length>0?(this.length--,this.elements.splice(this.length,1)):null}pollFirst(){return this.length>0?(this.length--,this.elements.splice(0,1)):null}add(t){let e=this.binarySearch(t);e<0&&(e=-e-1),this.elements.splice(e,0,t),this.length++}binarySearch(t){for(var e=0,r=this.elements.length-1;e<=r;){var n=e+r>>>1,i=this.elements[n],s=this.compatator(i,t);if(s<0)e=n+1;else{if(!(s>0))return n;r=n-1}}return-(e+1)}}},6563:function(t,e){"use strict";function r(t){if("number"!=typeof t)throw new TypeError("Expected a number")}e.j=(t,e)=>(r(t),r(e),Number.isNaN(t)?-1:Number.isNaN(e)?1:t-e)},7460:function(t,e){var r,n,i;n=[],r=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},r=!e.document&&!!e.postMessage,n=r&&/blob:/i.test((e.location||{}).protocol),i={},s=0,a={parse:function(r,n){var o=(n=n||{}).dynamicTyping||!1;if(w(o)&&(n.dynamicTypingFunction=o,o={}),n.dynamicTyping=o,n.transform=!!w(n.transform)&&n.transform,n.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var r,n,o=(r=e.URL||e.webkitURL||null,n=t.toString(),a.BLOB_URL||(a.BLOB_URL=r.createObjectURL(new Blob(["(",n,")();"],{type:"text/javascript"})))),l=new e.Worker(o);return l.onmessage=y,l.id=s++,i[l.id]=l}();return l.userStep=n.step,l.userChunk=n.chunk,l.userComplete=n.complete,l.userError=n.error,n.step=w(n.step),n.chunk=w(n.chunk),n.complete=w(n.complete),n.error=w(n.error),delete n.worker,void l.postMessage({input:r,config:n,workerId:l.id})}var p=null;return a.NODE_STREAM_INPUT,"string"==typeof r?p=n.download?new h(n):new f(n):!0===r.readable&&w(r.read)&&w(r.on)?p=new c(n):(e.File&&r instanceof File||r instanceof Object)&&(p=new u(n)),p.stream(r)},unparse:function(t,e){var r=!1,n=!0,i=",",s="\r\n",o='"',l=o+o,h=!1,u=null,f=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(r=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(h=e.skipEmptyLines),"string"==typeof e.newline&&(s=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(n=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+o),"boolean"==typeof e.escapeFormulae&&(f=e.escapeFormulae)}}();var c=new RegExp(d(o),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,h);if("object"==typeof t[0])return p(u||Object.keys(t[0]),t,h)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],h);throw new Error("Unable to serialize unrecognized input");function p(t,e,r){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(o&&n){for(var h=0;h<t.length;h++)0<h&&(a+=i),a+=m(t[h],h);0<e.length&&(a+=s)}for(var u=0;u<e.length;u++){var f=o?t.length:e[u].length,c=!1,p=o?0===Object.keys(e[u]).length:0===e[u].length;if(r&&!o&&(c="greedy"===r?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===r&&o){for(var d=[],y=0;y<f;y++){var g=l?t[y]:y;d.push(e[u][g])}c=""===d.join("").trim()}if(!c){for(var v=0;v<f;v++){0<v&&!p&&(a+=i);var b=o&&l?t[v]:v;a+=m(e[u][b],v)}u<e.length-1&&(!r||0<f&&!p)&&(a+=s)}}return a}function m(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===f&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var n=t.toString().replace(c,l),s="boolean"==typeof r&&r||"function"==typeof r&&r(t,e)||Array.isArray(r)&&r[e]||function(t,e){for(var r=0;r<e.length;r++)if(-1<t.indexOf(e[r]))return!0;return!1}(n,a.BAD_DELIMITERS)||-1<n.indexOf(i)||" "===n.charAt(0)||" "===n.charAt(n.length-1);return s?o+n+o:n}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=m,a.ParserHandle=p,a.NetworkStreamer=h,a.FileStreamer=u,a.StringStreamer=f,a.ReadableStreamStreamer=c,e.jQuery){var o=e.jQuery;o.fn.parse=function(t){var r=t.config||{},n=[];return this.each((function(t){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)n.push({file:this.files[i],inputElem:this,instanceConfig:o.extend({},r)})})),i(),this;function i(){if(0!==n.length){var e,r,i,l,h=n[0];if(w(t.before)){var u=t.before(h.file,h.inputElem);if("object"==typeof u){if("abort"===u.action)return e="AbortError",r=h.file,i=h.inputElem,l=u.reason,void(w(t.error)&&t.error({name:e},r,i,l));if("skip"===u.action)return void s();"object"==typeof u.config&&(h.instanceConfig=o.extend(h.instanceConfig,u.config))}else if("skip"===u)return void s()}var f=h.instanceConfig.complete;h.instanceConfig.complete=function(t){w(f)&&f(t,h.file,h.inputElem),s()},a.parse(h.file,h.instanceConfig)}else w(t.complete)&&t.complete()}function s(){n.splice(0,1),i()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,r){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+t;this._partialLine="";var o=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=o.meta.cursor;this._finished||(this._partialLine=s.substring(l-this._baseIndex),this._baseIndex=l),o&&o.data&&(this._rowCount+=o.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)e.postMessage({results:o,workerId:a.WORKER_ID,finished:h});else if(w(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!h||!w(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):n&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),l.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var n in t)e.setRequestHeader(n,t[n])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var r=e.statusText||t;this._sendError(new Error(r))}}function u(t){var e,r;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),l.call(this,t);var n="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,r=t.slice||t.webkitSlice||t.mozSlice,n?((e=new FileReader).onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=r.call(t,this._start,i)}var s=e.readAsText(t,this._config.encoding);n||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,r=this._config.chunkSize;return r?(t=e.substring(0,r),e=e.substring(r)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function c(t){l.call(this,t=t||{});var e=[],r=!0,n=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):r=!0},this._streamData=_((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=_((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=_((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(t){var e,r,n,i=Math.pow(2,53),s=-i,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,h=this,u=0,f=0,c=!1,p=!1,y=[],g={data:[],errors:[],meta:{}};if(w(t.step)){var v=t.step;t.step=function(e){if(g=e,E())x();else{if(x(),0===g.data.length)return;u+=e.data.length,t.preview&&u>t.preview?r.abort():(g.data=g.data[0],v(g,h))}}}function _(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function x(){if(g&&n&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines)for(var e=0;e<g.data.length;e++)_(g.data[e])&&g.data.splice(e--,1);return E()&&function(){if(g)if(Array.isArray(g.data[0])){for(var e=0;E()&&e<g.data.length;e++)g.data[e].forEach(r);g.data.splice(0,1)}else g.data.forEach(r);function r(e,r){w(t.transformHeader)&&(e=t.transformHeader(e,r)),y.push(e)}}(),function(){if(!g||!t.header&&!t.dynamicTyping&&!t.transform)return g;function e(e,r){var n,i=t.header?{}:[];for(n=0;n<e.length;n++){var s=n,a=e[n];t.header&&(s=n>=y.length?"__parsed_extra":y[n]),t.transform&&(a=t.transform(a,s)),a=A(s,a),"__parsed_extra"===s?(i[s]=i[s]||[],i[s].push(a)):i[s]=a}return t.header&&(n>y.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+n,f+r):n<y.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+n,f+r)),i}var r=1;return!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(e),r=g.data.length):g.data=e(g.data,0),t.header&&g.meta&&(g.meta.fields=y),f+=r,g}()}function E(){return t.header&&0===y.length}function A(e,r){return n=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[n]&&(t.dynamicTyping[n]=t.dynamicTypingFunction(n)),!0===(t.dynamicTyping[n]||t.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(t){if(o.test(t)){var e=parseFloat(t);if(s<e&&e<i)return!0}return!1}(r)?parseFloat(r):l.test(r)?new Date(r):""===r?null:r):r;var n}function k(t,e,r,n){var i={type:t,code:e,message:r};void 0!==n&&(i.row=n),g.errors.push(i)}this.parse=function(i,s,o){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var r=new RegExp(d(e)+"([^]*?)"+d(e),"gm"),n=(t=t.replace(r,"")).split("\r"),i=t.split("\n"),s=1<i.length&&i[0].length<n[0].length;if(1===n.length||s)return"\n";for(var a=0,o=0;o<n.length;o++)"\n"===n[o][0]&&a++;return a>=n.length/2?"\r\n":"\r"}(i,l)),n=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(i),g.meta.delimiter=t.delimiter);else{var h=function(e,r,n,i,s){var o,l,h,u;s=s||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var f=0;f<s.length;f++){var c=s[f],p=0,d=0,y=0;h=void 0;for(var g=new m({comments:i,delimiter:c,newline:r,preview:10}).parse(e),v=0;v<g.data.length;v++)if(n&&_(g.data[v]))y++;else{var b=g.data[v].length;d+=b,void 0!==h?0<b&&(p+=Math.abs(b-h),h=b):h=b}0<g.data.length&&(d/=g.data.length-y),(void 0===l||p<=l)&&(void 0===u||u<d)&&1.99<d&&(l=p,o=c,u=d)}return{successful:!!(t.delimiter=o),bestDelimiter:o}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);h.successful?t.delimiter=h.bestDelimiter:(n=!0,t.delimiter=a.DefaultDelimiter),g.meta.delimiter=t.delimiter}var u=b(t);return t.preview&&t.header&&u.preview++,e=i,r=new m(u),g=r.parse(e,s,o),x(),c?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,r.abort(),e=w(t.chunk)?"":e.substring(r.getCharIndex())},this.resume=function(){h.streamer._halted?(c=!1,h.streamer.parseChunk(e,!0)):setTimeout(h.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,r.abort(),g.meta.aborted=!0,w(t.complete)&&t.complete(g),e=""}}function d(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e,r=(t=t||{}).delimiter,n=t.newline,i=t.comments,s=t.step,o=t.preview,l=t.fastMode,h=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=","),i===r)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var u=0,f=!1;this.parse=function(t,a,c){if("string"!=typeof t)throw new Error("Input must be a string");var p=t.length,m=r.length,y=n.length,g=i.length,v=w(s),b=[],_=[],x=[],E=u=0;if(!t)return I();if(l||!1!==l&&-1===t.indexOf(e)){for(var A=t.split(n),k=0;k<A.length;k++){if(x=A[k],u+=x.length,k!==A.length-1)u+=n.length;else if(c)return I();if(!i||x.substring(0,g)!==i){if(v){if(b=[],F(x.split(r)),P(),f)return I()}else F(x.split(r));if(o&&o<=k)return b=b.slice(0,o),I(!0)}}return I()}for(var S=t.indexOf(r,u),O=t.indexOf(n,u),M=new RegExp(d(h)+d(e),"g"),T=t.indexOf(e,u);;)if(t[u]!==e)if(i&&0===x.length&&t.substring(u,u+g)===i){if(-1===O)return I();u=O+y,O=t.indexOf(n,u),S=t.indexOf(r,u)}else if(-1!==S&&(S<O||-1===O))x.push(t.substring(u,S)),u=S+m,S=t.indexOf(r,u);else{if(-1===O)break;if(x.push(t.substring(u,O)),D(O+y),v&&(P(),f))return I();if(o&&b.length>=o)return I(!0)}else for(T=u,u++;;){if(-1===(T=t.indexOf(e,T+1)))return c||_.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),N();if(T===p-1)return N(t.substring(u,T).replace(M,e));if(e!==h||t[T+1]!==h){if(e===h||0===T||t[T-1]!==h){-1!==S&&S<T+1&&(S=t.indexOf(r,T+1)),-1!==O&&O<T+1&&(O=t.indexOf(n,T+1));var R=L(-1===O?S:Math.min(S,O));if(t[T+1+R]===r){x.push(t.substring(u,T).replace(M,e)),t[u=T+1+R+m]!==e&&(T=t.indexOf(e,u)),S=t.indexOf(r,u),O=t.indexOf(n,u);break}var C=L(O);if(t.substring(T+1+C,T+1+C+y)===n){if(x.push(t.substring(u,T).replace(M,e)),D(T+1+C+y),S=t.indexOf(r,u),T=t.indexOf(e,u),v&&(P(),f))return I();if(o&&b.length>=o)return I(!0);break}_.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),T++}}else T++}return N();function F(t){b.push(t),E=u}function L(e){var r=0;if(-1!==e){var n=t.substring(T+1,e);n&&""===n.trim()&&(r=n.length)}return r}function N(e){return c||(void 0===e&&(e=t.substring(u)),x.push(e),u=p,F(x),v&&P()),I()}function D(e){u=e,F(x),x=[],O=t.indexOf(n,u)}function I(t){return{data:b,errors:_,meta:{delimiter:r,linebreak:n,aborted:f,truncated:!!t,cursor:E+(a||0)}}}function P(){s(I()),b=[],_=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return u}}function y(t){var e=t.data,r=i[e.workerId],n=!1;if(e.error)r.userError(e.error,e.file);else if(e.results&&e.results.data){var s={abort:function(){n=!0,g(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(w(r.userStep)){for(var a=0;a<e.results.data.length&&(r.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},s),!n);a++);delete e.results}else w(r.userChunk)&&(r.userChunk(e.results,s,e.file),delete e.results)}e.finished&&!n&&g(e.workerId,e.results)}function g(t,e){var r=i[t];w(r.userComplete)&&r.userComplete(e),r.terminate(),delete i[t]}function v(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var r in t)e[r]=b(t[r]);return e}function _(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return n&&(e.onmessage=function(t){var r=t.data;if(void 0===a.WORKER_ID&&r&&(a.WORKER_ID=r.workerId),"string"==typeof r.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(r.input,r.config),finished:!0});else if(e.File&&r.input instanceof File||r.input instanceof Object){var n=a.parse(r.input,r.config);n&&e.postMessage({workerId:a.WORKER_ID,results:n,finished:!0})}}),(h.prototype=Object.create(l.prototype)).constructor=h,(u.prototype=Object.create(l.prototype)).constructor=u,(f.prototype=Object.create(f.prototype)).constructor=f,(c.prototype=Object.create(l.prototype)).constructor=c,a},void 0===(i="function"==typeof r?r.apply(e,n):r)||(t.exports=i)}}]);